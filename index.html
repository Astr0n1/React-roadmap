<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>React + Tailwind 6 Weeks Plan</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 0;
        background: #f4f6f8;
        color: #333;
      }

      header {
        background: #4caf50;
        color: white;
        padding: 1rem;
        text-align: center;
        position: sticky;
        top: 0;
        z-index: 1000;
      }

      .nav-buttons {
        display: flex;
        justify-content: center;
        flex-wrap: wrap;
        margin: 0.5rem;
      }

      .nav-buttons button {
        margin: 0.3rem;
        padding: 0.5rem 1rem;
        border: none;
        border-radius: 6px;
        background: #2196f3;
        color: white;
        cursor: pointer;
        transition: background 0.3s;
      }

      .nav-buttons button:hover {
        background: #1976d2;
      }

      section {
        padding: 1rem;
        max-width: 1200px;
        margin: auto;
      }

      h2 {
        margin-top: 2rem;
        text-align: center;
        color: #4caf50;
      }

      .cards {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 1rem;
        margin-top: 1rem;
      }

      .card {
        background: white;
        border-radius: 12px;
        padding: 1rem;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
        transition: transform 0.2s, background 0.3s;
        display: flex;
        flex-direction: column;
      }

      .card:hover {
        transform: translateY(-3px);
      }

      .card.completed {
        background: #e8f5e9;
        border-left: 6px solid #4caf50;
        text-decoration: line-through;
        color: #666;
      }

      .checkbox-wrapper {
        display: flex;
        align-items: center;
        margin-bottom: 0.5rem;
      }

      .checkbox-wrapper input[type="checkbox"] {
        appearance: none;
        width: 18px;
        height: 18px;
        border: 2px solid #4caf50;
        border-radius: 4px;
        margin-right: 8px;
        cursor: pointer;
        position: relative;
      }

      .checkbox-wrapper input[type="checkbox"]:checked {
        background: #4caf50;
      }

      .checkbox-wrapper input[type="checkbox"]:checked::after {
        content: "‚úî";
        position: absolute;
        color: white;
        font-size: 14px;
        left: 2px;
        top: -2px;
      }

      .card a {
        margin-top: auto;
        color: #2196f3;
        font-size: 0.9rem;
        text-decoration: none;
      }

      .card a:hover {
        text-decoration: underline;
      }
    </style>
  </head>
  <body>
    <header>
      <h1>üìò React + Tailwind 6 Weeks Plan</h1>
      <div class="nav-buttons">
        <button onclick="scrollToWeek('week1')">Week 1</button>
        <button onclick="scrollToWeek('week2')">Week 2</button>
        <button onclick="scrollToWeek('week3')">Week 3</button>
        <button onclick="scrollToWeek('week4')">Week 4</button>
        <button onclick="scrollToWeek('week5')">Week 5</button>
        <button onclick="scrollToWeek('week6')">Week 6</button>
      </div>
    </header>

    <main id="content"></main>

    <script>
      async function loadData() {
        const response = await fetch("./data.json");
        const weeks = await response.json();
        renderWeeks(weeks);
      }

      function renderWeeks(weeks) {
        const container = document.getElementById("content");
        container.innerHTML = "";

        weeks.forEach((week, wIndex) => {
          const section = document.createElement("section");
          section.id = `week${wIndex + 1}`;
          section.innerHTML = `<h2>${week.title}</h2>`;

          const cardsDiv = document.createElement("div");
          cardsDiv.className = "cards";

          week.days.forEach((day, dIndex) => {
            const card = document.createElement("div");
            card.className = "card " + (day.completed ? "completed" : "");
            card.innerHTML = `
              <div class="checkbox-wrapper">
                <input type="checkbox" ${day.completed ? "checked" : ""} 
                  onchange="toggleTask(${wIndex}, ${dIndex}, this.checked)">
                <strong>${day.name}</strong>
              </div>
              <p>${day.topic}</p>
              <a href="${day.link}" target="_blank">Resource</a>
            `;
            cardsDiv.appendChild(card);
          });

          section.appendChild(cardsDiv);
          container.appendChild(section);
        });
      }

      function scrollToWeek(id) {
        document.getElementById(id).scrollIntoView({ behavior: "smooth" });
      }

      async function toggleTask(wIndex, dIndex, state) {
        const response = await fetch("./data.json");
        const weeks = await response.json();
        weeks[wIndex].days[dIndex].completed = state;

        // ÿ•ÿ±ÿ≥ÿßŸÑ ŸÑŸÑÿ®ÿßŸÉ ÿ•ŸÜÿØ (ŸÑŸÖÿß ŸÜÿ∂ŸäŸÅ ÿßŸÑÿ≥Ÿäÿ±ŸÅÿ±)
        await fetch("/update", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(weeks),
        });

        renderWeeks(weeks);
      }

      loadData();
    </script>
  </body>
</html>
